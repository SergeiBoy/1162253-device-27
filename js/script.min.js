var button=document.querySelector(".our-contacts .write-us"),popup=document.querySelector(".modal-message"),close=popup.querySelector(".close-cross"),form=popup.querySelector(".message-form"),personName=popup.querySelector("[name=name]"),email=popup.querySelector("[name=email]"),text=popup.querySelector("[name=text]"),isStorageSupport=!0,storageName="",storageEmail="",mapButton=document.querySelector(".our-contacts .map-address"),mapPopup=document.querySelector(".modal-map-wrapper"),mapInPopup=mapPopup.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".close-cross-map");try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function initMap(){var e={lat:55.686995,lng:37.529564},o=new google.maps.Map(mapInPopup,{zoom:17,center:e});new google.maps.Marker({position:e,map:o})}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-message-close"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-show"),storageName&&(personName.value=storageName,email.focus()),storageEmail&&(email.value=storageEmail,text.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-message-show"),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-close"),personName.required=!1,email.required=!1}),form.addEventListener("submit",function(e){personName.value&&email.value?isStorageSupport&&(localStorage.setItem("name",personName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),personName.value||(personName.required=!0),email.value||(email.required=!0),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-message-show")&&(popup.classList.remove("modal-message-show"),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-close"),personName.required=!1,email.required=!1),"flex"===mapPopup.style.display&&(mapPopup.style.display="none"))}),mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopup.style.display="flex"}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.style.display="none"});var script=document.createElement("script");script.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3BpFqzWP_ymtXwTlGLCK0ujLH9BBKCJo&callback=initMap",script.async=!0,script.defer=!0,document.body.appendChild(script);